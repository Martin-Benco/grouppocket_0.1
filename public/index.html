
<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GroupPocket - Zdieƒæanie v√Ωdavkov</title>
    <link rel="stylesheet" href="./styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc, getDocs, doc, getDoc, query, where, updateDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        
        // Firebase konfigur√°cia - GroupPocket projekt
        const firebaseConfig = {
            apiKey: "AIzaSyBe3IpLHA-KOBkVpBL7bHP0RwxwN_DOGoA",
            authDomain: "grouppocket-402df.firebaseapp.com",
            projectId: "grouppocket-402df",
            storageBucket: "grouppocket-402df.firebasestorage.app",
            messagingSenderId: "321578774200",
            appId: "1:321578774200:web:a62b3a2ad2e0355e21ce4d",
            measurementId: "G-34MYJBFRM9"
        };
        
        try {
            console.log('üî• Inicializujem Firebase...');
            console.log('üîç Konfigur√°cia:', firebaseConfig);
            
            // Inicializ√°cia Firebase
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);
            
            // Exportuj do glob√°lnej premennej
            window.firebaseApp = app;
            window.firebaseDB = db;
            window.firebaseCollection = collection;
            window.firebaseAddDoc = addDoc;
            window.firebaseGetDocs = getDocs;
            window.firebaseDoc = doc;
            window.firebaseGetDoc = getDoc;
            window.firebaseQuery = query;
            window.firebaseWhere = where;
            window.firebaseUpdateDoc = updateDoc;
            
            console.log('‚úÖ Firebase √∫spe≈°ne inicializovan√Ω!');
            console.log('üîç Firebase objekty:', {
                app: !!window.firebaseApp,
                db: !!window.firebaseDB,
                collection: !!window.firebaseCollection,
                addDoc: !!window.firebaseAddDoc
            });
        } catch (error) {
            console.error('‚ùå Chyba pri inicializ√°cii Firebase:', error);
            console.error('‚ùå Error details:', {
                message: error.message,
                stack: error.stack,
                name: error.name
            });
            console.log('üí° Firebase nie je dostupn√Ω, pou≈æ√≠vam simul√°ciu');
            
            // Fallback pre testovanie
            window.firebaseApp = null;
            window.firebaseDB = null;
            window.firebaseCollection = () => console.log('Firebase nie je nakonfigurovan√Ω');
            window.firebaseAddDoc = () => console.log('Firebase nie je nakonfigurovan√Ω');
            window.firebaseGetDocs = () => console.log('Firebase nie je nakonfigurovan√Ω');
            window.firebaseDoc = () => console.log('Firebase nie je nakonfigurovan√Ω');
            window.firebaseGetDoc = () => console.log('Firebase nie je nakonfigurovan√Ω');
            window.firebaseQuery = () => console.log('Firebase nie je nakonfigurovan√Ω');
            window.firebaseWhere = () => console.log('Firebase nie je nakonfigurovan√Ω');
            window.firebaseUpdateDoc = () => console.log('Firebase nie je nakonfigurovan√Ω');
        }
    </script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="logo">üí∞ GroupPocket</h1>
            <p class="subtitle">Jednoduch√© zdieƒæanie v√Ωdavkov</p>
        </header>

        <main class="main-content">
            <!-- Skupiny sekcia -->
            <div class="card" id="groupsCard">
                <h2 class="card-title">Skupiny</h2>
                
                <div class="group-actions">
                    <button id="createGroupBtn" class="btn btn-secondary">
                        Vytvori≈• nov√∫ skupinu
                    </button>
                    <button id="joinGroupBtn" class="btn btn-secondary">
                        Prip√°ja≈• sa ku skupine
                    </button>
                    <button id="listGroupsBtn" class="btn btn-secondary">
                        Zobrazi≈• v≈°etky skupiny
                    </button>
                </div>
                
                <!-- Pripojen√© skupiny -->
                <div id="connectedGroups" class="connected-groups" style="display: none;">
                    <h3>Moje skupiny</h3>
                    <div id="connectedGroupsList" class="connected-groups-list">
                        <!-- Pripojen√© skupiny sa vygeneruj√∫ dynamicky -->
                    </div>
                </div>
            </div>

            <!-- Aktu√°lna skupina -->
            <div id="currentGroup" class="current-group" style="display: none;">
                <h3>Aktu√°lna skupina:</h3>
                <div class="group-info">
                    <span id="groupName">N√°zov skupiny</span>
                    <span id="groupID">ID: ABC123</span>
                </div>
                
                <!-- ƒålenovia skupiny -->
                <div class="members-section">
                    <h4>ƒålenovia skupiny (<span id="memberCount">0</span>)</h4>
                    <div class="add-member">
                        <input type="text" id="newMemberName" placeholder="Meno ƒçlena" class="member-input">
                        <button id="addMemberBtn" class="btn btn-secondary">Prida≈• ƒçlena</button>
                    </div>
                    <div id="membersList" class="members-list"></div>
                </div>
                
                <!-- V√Ωdavky skupiny -->
                <div class="expenses-section">
                    <h4>V√Ωdavky skupiny</h4>
                    <div class="expenses-summary">
                        <div class="summary-item">
                            <span class="summary-label">Celkov√© v√Ωdavky:</span>
                            <span id="totalExpenses" class="summary-value">0.00 ‚Ç¨</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Na osobu:</span>
                            <span id="perPersonAmount" class="summary-value">0.00 ‚Ç¨</span>
                        </div>
                    </div>
                    <div class="add-expense">
                        <input type="text" id="expenseDescription" placeholder="Popis v√Ωdavku" class="expense-input">
                        <input type="number" id="expenseAmount" placeholder="Suma (‚Ç¨)" step="0.01" class="expense-input">
                        <button id="addExpenseBtn" class="btn btn-secondary">Prida≈• v√Ωdavok</button>
                    </div>
                    <div id="expensesList" class="expenses-list"></div>
                </div>
                
                <div class="group-actions-bottom">
                    <button id="refreshGroupBtn" class="btn btn-secondary">üîÑ Obnovi≈•</button>
                    <button id="payMeBtn" class="btn btn-success">üí∞ Vyplati≈•</button>
                    <button id="leaveGroupBtn" class="btn btn-danger">Opusti≈• skupinu</button>
                </div>
            </div>

            <!-- V√Ωdavky sekcia -->
            <div class="card" id="expensesCard" style="display: none;">
                <div class="expenses-header">
                    <button id="backToGroupBtn" class="btn btn-secondary">‚Üê Sp√§≈• ku skupine</button>
                    <h2 class="card-title">Rozdeli≈• v√Ωdavok</h2>
                </div>
                
                <form id="expenseForm" class="expense-form">
                    <div class="input-group">
                        <label for="amount">Suma (‚Ç¨)</label>
                        <input 
                            type="number" 
                            id="amount" 
                            name="amount" 
                            placeholder="0.00" 
                            step="0.01" 
                            min="0.01" 
                            required
                        >
                    </div>

                    <div class="input-group">
                        <label for="people">Poƒçet ƒæud√≠</label>
                        <input 
                            type="number" 
                            id="people" 
                            name="people" 
                            placeholder="2" 
                            min="2" 
                            max="20" 
                            required
                        >
                    </div>

                    <button type="submit" class="btn btn-primary">
                        Rozdeli≈• sumu
                    </button>
                </form>

                <div id="result" class="result-section" style="display: none;">
                    <div class="result-header">
                        <h3>V√Ωsledok rozdelenia</h3>
                        <div class="total-info">
                            <span class="total-amount">Celkov√° suma: <strong id="totalAmount">0.00 ‚Ç¨</strong></span>
                            <span class="per-person">Na osobu: <strong id="perPerson">0.00 ‚Ç¨</strong></span>
                        </div>
                    </div>

                    <div class="payment-buttons" id="paymentButtons">
                        <!-- Tlaƒçidl√° pre platby sa vygeneruj√∫ dynamicky -->
                    </div>
                </div>
            </div>
        </main>

        <footer class="footer">
            <p>&copy; 2024 GroupPocket - Verzia 0.1</p>
        </footer>
    </div>

    <!-- Mod√°lne okn√° -->
    <div id="createGroupModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>Vytvori≈• nov√∫ skupinu</h3>
            <form id="createGroupForm">
                <div class="input-group">
                    <label for="groupNameInput">N√°zov skupiny</label>
                    <input type="text" id="groupNameInput" placeholder="Napr√≠klad: V√Ωlet do Tatier" required>
                </div>
                <div class="input-group">
                    <label for="createUsernameInput">Tvoja prez√≠vka</label>
                    <input type="text" id="createUsernameInput" placeholder="Napr√≠klad: Martin" required>
                </div>
                <div class="modal-actions">
                    <button type="button" id="cancelCreateGroup" class="btn btn-secondary">Zru≈°i≈•</button>
                    <button type="submit" class="btn btn-primary">Vytvori≈• skupinu</button>
                </div>
            </form>
        </div>
    </div>

    <div id="joinGroupModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>Prip√°ja≈• sa ku skupine</h3>
            <form id="joinGroupForm">
                <div class="input-group">
                    <label for="groupIDInput">ID skupiny</label>
                    <input type="text" id="groupIDInput" placeholder="Zadajte ID skupiny" required>
                </div>
                <div class="input-group">
                    <label for="joinUsernameInput">Tvoja prez√≠vka</label>
                    <input type="text" id="joinUsernameInput" placeholder="Napr√≠klad: Martin" required>
                </div>
                <div class="modal-actions">
                    <button type="button" id="cancelJoinGroup" class="btn btn-secondary">Zru≈°i≈•</button>
                    <button type="submit" class="btn btn-primary">Prip√°ja≈• sa</button>
                </div>
            </form>
        </div>
    </div>

    <!-- DEBUG: Skontroluj ƒçi sa naƒç√≠tal script -->
    <script>
        console.log('üîç HTML naƒç√≠tan√Ω, ƒçak√°m na script.js...');
        
        // Skontroluj ƒçi existuj√∫ potrebn√© elementy
        setTimeout(() => {
            console.log('üîç Kontrola elementov po 1s:');
            console.log('- Form:', document.getElementById('expenseForm') ? '‚úÖ' : '‚ùå');
            console.log('- Result:', document.getElementById('result') ? '‚úÖ' : '‚ùå');
            console.log('- Payment buttons:', document.getElementById('paymentButtons') ? '‚úÖ' : '‚ùå');
        }, 1000);
    </script>
    
    <script src="./script.js"></script>
</body>
</html>
